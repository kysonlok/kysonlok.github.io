<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="google-site-verification" content="BEJwibIBrcAQPUa_NmC_S46RiD5z0xyL0WpGrZEEv34"><title>嵌入式设备 gdbserver 可视化调试 - Kyson.Lok</title><meta description="技术背景嵌入式设备资源相对较少，为了节省存储空间一般会对应用程序做 strip 操作。应用程序被 strip 后，符号表会被删除，导致 gdb 调试捕捉不到关键信息。选择 gdbserver 远程调试是一个不错的方案。"><meta property="og:type" content="blog"><meta property="og:title" content="嵌入式设备 gdbserver 可视化调试"><meta property="og:url" content="http://kysonlok.github.io/2020/06/13/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%AE%BE%E5%A4%87-gdbserver-%E5%8F%AF%E8%A7%86%E5%8C%96%E8%B0%83%E8%AF%95/"><meta property="og:site_name" content="Kyson.Lok"><meta property="og:description" content="技术背景嵌入式设备资源相对较少，为了节省存储空间一般会对应用程序做 strip 操作。应用程序被 strip 后，符号表会被删除，导致 gdb 调试捕捉不到关键信息。选择 gdbserver 远程调试是一个不错的方案。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/kysonlok/imgurl/raw/master/img/20200613140241.jpg"><meta property="article:published_time" content="2020-06-13T06:05:47.000Z"><meta property="article:modified_time" content="2020-06-14T01:06:24.877Z"><meta property="article:author" content="Kyson Lok"><meta property="article:tag" content="VSCode"><meta property="article:tag" content="gdb"><meta property="article:tag" content="gdbserver"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://gitee.com/kysonlok/imgurl/raw/master/img/20200613140241.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://kysonlok.github.io/2020/06/13/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%AE%BE%E5%A4%87-gdbserver-%E5%8F%AF%E8%A7%86%E5%8C%96%E8%B0%83%E8%AF%95/"},"headline":"Kyson.Lok","image":["https://gitee.com/kysonlok/imgurl/raw/master/img/20200613140241.jpg"],"datePublished":"2020-06-13T06:05:47.000Z","dateModified":"2020-06-14T01:06:24.877Z","author":{"@type":"Person","name":"Kyson Lok"},"description":"技术背景嵌入式设备资源相对较少，为了节省存储空间一般会对应用程序做 strip 操作。应用程序被 strip 后，符号表会被删除，导致 gdb 调试捕捉不到关键信息。选择 gdbserver 远程调试是一个不错的方案。"}</script><link rel="canonical" href="http://kysonlok.github.io/2020/06/13/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%AE%BE%E5%A4%87-gdbserver-%E5%8F%AF%E8%A7%86%E5%8C%96%E8%B0%83%E8%AF%95/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Kyson&#039;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/kysonlok"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-06-13T06:05:47.000Z" title="2020-06-13T06:05:47.000Z">2020-06-13</time><span class="level-item"><a class="link-muted" href="/categories/%E5%8A%9E%E5%85%AC%E5%88%A9%E5%99%A8/">办公利器</a></span><span class="level-item">12 分钟 读完 (大约 1855 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">嵌入式设备 gdbserver 可视化调试</h1><div class="content"><h2 id="技术背景"><a href="#技术背景" class="headerlink" title="技术背景"></a>技术背景</h2><p>嵌入式设备资源相对较少，为了节省存储空间一般会对应用程序做 strip 操作。应用程序被 strip 后，符号表会被删除，导致 gdb 调试捕捉不到关键信息。选择 gdbserver 远程调试是一个不错的方案。  </p>
<a id="more"></a>  

<p>在目标板子上用 gdbserver 把应用程序运行起来，在 Linux 主机上用交叉编译工具链的 gdb 把没有 strip 的应用程序运行，并且连接到 gdbserver，就可以进行调试了，再配合 VSCode，还可以可视化调试。    </p>
<h2 id="gdbserver-编译"><a href="#gdbserver-编译" class="headerlink" title="gdbserver 编译"></a>gdbserver 编译</h2><p>为了避免兼容的问题，gdb 的版本要跟交叉编译工具链的 gdb 版本保持一致。gdb server 是包含在 gdb 工程中的，因此，编译 gdbserver 要下载 gdb 源码压缩包，在 <a href="https://ftp.gnu.org/gnu/gdb/">gdb 下载页面</a> 下载交叉编译工具链对应的版本。    </p>
<p>我使用的交叉编译工具链的 gdb 版本为 7.6.2，因此下载 gdb-7.6.2。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https:&#x2F;&#x2F;ftp.gnu.org&#x2F;gnu&#x2F;gdb&#x2F;gdb-7.6.2.tar.bz2 -o gdb-7.6.2.tar.bz2</span><br><span class="line">tar xvf gdb-7.6.2.tar.bz2</span><br><span class="line">cd gdb-7.6.2&#x2F;gdb&#x2F;gdbserver</span><br></pre></td></tr></table></figure>

<p>为了方便，把编译命令放到 shell 脚本中，执行脚本进行编译。    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;sh</span><br><span class="line"></span><br><span class="line">COMPILE_PREX&#x3D;&#x2F;home&#x2F;kyson&#x2F;toolchain&#x2F;rsdk-4.6.4-4181-EB-3.10-u0.9.33-m32-150324&#x2F;bin&#x2F;mips-linux- </span><br><span class="line">PREFIX&#x3D;&#x2F;tmp</span><br><span class="line">HOST&#x3D;mips-linux</span><br><span class="line"></span><br><span class="line">AR&#x3D;$&#123;COMPILE_PREX&#125;ar</span><br><span class="line">CC&#x3D;$&#123;COMPILE_PREX&#125;gcc</span><br><span class="line">NM&#x3D;$&#123;COMPILE_PREX&#125;nm</span><br><span class="line">CPP&#x3D;$&#123;COMPILE_PREX&#125;g++</span><br><span class="line">RANLIB&#x3D;$&#123;COMPILE_PREX&#125;ranlib</span><br><span class="line"></span><br><span class="line">CC&#x3D;$&#123;CC&#125; CPP&#x3D;$&#123;CXX&#125; NM&#x3D;$&#123;NM&#125; AR&#x3D;$&#123;AR&#125; RANLIB&#x3D;$&#123;RANLIB&#125; .&#x2F;configure --prefix&#x3D;$&#123;PREFIX&#125; --host&#x3D;$&#123;HOST&#125;</span><br><span class="line"></span><br><span class="line">make &amp; make install</span><br></pre></td></tr></table></figure>

<p>脚本的三个变量：  </p>
<ul>
<li><p><strong>COMPILE_PREX</strong>: 指定交叉编译工具链前缀，要替换掉。  </p>
</li>
<li><p><strong>PREFIX</strong>: 指定执行 <code>make install</code> 的安装路径。  </p>
</li>
<li><p><strong>HOST</strong>: 指定目标系统类型。    </p>
</li>
</ul>
<p>这里指定的安装路径是 <strong>/tmp</strong>，编译成功后 gdbserver 位于 <strong>/tmp/local/bin/gdbserver</strong>，把它上传到目标设备就可以使用了。  </p>
<h2 id="gdbserver-使用"><a href="#gdbserver-使用" class="headerlink" title="gdbserver 使用"></a>gdbserver 使用</h2><p>用交叉编译工具链的 gcc 编译应用程序，并上传到目标设备上。同样地，把前面编译生成的 <strong>gdbserver</strong> 上传到目标设备上。这里为了演示，写了一个简单的应用程序用来演示：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">static void copy_str(char *str)</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;* 空指针赋值，段错误 *&#x2F;</span><br><span class="line">    strcpy(str, &quot;Hello World&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char **argv)</span><br><span class="line">&#123;</span><br><span class="line">    char *prt &#x3D; NULL;</span><br><span class="line"></span><br><span class="line">    copy_str(prt);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把 gcc 替换成自己本地交叉编译工具链的 gcc，编译应用程序。    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;home&#x2F;kyson&#x2F;toolchain&#x2F;rsdk-4.6.4-4181-EB-3.10-u0.9.33-m32-150324&#x2F;bin&#x2F;mips-linux-gcc -g my_prog.c -o my_prog</span><br></pre></td></tr></table></figure>

<p>应用程序要同时在设备端和 Linux 主机端运行，设备端用 gdbserver 运行，Linux 主机端用交叉编译工具链的 gdb 运行。  </p>
<h3 id="嵌入式设备端"><a href="#嵌入式设备端" class="headerlink" title="嵌入式设备端"></a>嵌入式设备端</h3><p>用 <strong>gdbserver</strong> 把将要调试的应用程序运行起来，设备端的程序可以是 strip 过的，这里演示使用的是上面编译的测试程序 <strong>my_prog</strong>。    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;gdbserver :12120 my_prog</span><br></pre></td></tr></table></figure>

<p><strong>12120</strong> 表示监听的端口号，随便指定一个可用的端口即可。这里没有指定 IP 地址，表示 “0.0.0.0”，监听所有网络接口，如需要指定某个网络接口，可以指定 IP 地址。    </p>
<h3 id="Linux-主机端"><a href="#Linux-主机端" class="headerlink" title="Linux 主机端"></a>Linux 主机端</h3><h4 id="启动调试"><a href="#启动调试" class="headerlink" title="启动调试"></a>启动调试</h4><p>用交叉编译工具链中的 <strong>gdb</strong> 把上面编译的应用程序运行起来。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;home&#x2F;kyson&#x2F;toolchain&#x2F;rsdk-4.6.4-4181-EB-3.10-u0.9.33-m32-150324&#x2F;bin&#x2F;mips-linux-gdb --args my_prog</span><br></pre></td></tr></table></figure>

<p><strong>–args</strong> 表示要调试的可执行文件后的参数被传递，也就是调试的程序是接收命令行参数的，要加上此参数。  </p>
<blockquote>
<p>注意，主机端的程序不能是 strip 的，因为 gdb 调试要找到符号表，并且编译要加上 <code>-g</code> 调试选项，否则调试获取不到关键信息。    </p>
</blockquote>
<h4 id="连接-gdbserver"><a href="#连接-gdbserver" class="headerlink" title="连接 gdbserver"></a>连接 gdbserver</h4><p>gdb 启动后，连接到设备端的 gdbserver。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) target remote 192.168.0.210:12120</span><br><span class="line">Remote debugging using 192.168.0.210:12120</span><br></pre></td></tr></table></figure>

<p><strong>192.168.0.210</strong> 是设备端的 IP 地址。  </p>
<p><strong>12120</strong> 是设备端的端口，必须跟 gdbserver 启动指定的端口一致。    </p>
<blockquote>
<p>Tips: 连接不上检查一下 Linux 主机和设备是否同处于一个局域网，设备端的防火墙是否关闭。    </p>
</blockquote>
<h4 id="设置动态库路径-可选"><a href="#设置动态库路径-可选" class="headerlink" title="设置动态库路径(可选)"></a>设置动态库路径(可选)</h4><p>如果程序依赖外部的动态库，可以设置查找库的路径。    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) set solib-search-path [Directories]</span><br></pre></td></tr></table></figure>
<p><strong>Directories</strong> 表示动态库所在的路径，多个路径用 <strong>:</strong> 分割。   </p>
<h4 id="开始调试"><a href="#开始调试" class="headerlink" title="开始调试"></a>开始调试</h4><p>因为 gdbserver 已经把程序启动了，主机端进入调试模式不需要执行 <strong>r</strong> (run)，直接执行 <strong>c</strong> (continue) 就可以进行调试了。 更多 gdb 用法，可以参考 <a href="https://sourceware.org/gdb/current/onlinedocs/gdb/Sample-Session.html#Sample-Session">A Sample GDB Session</a>。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">   </span><br><span class="line">Program received signal SIGSEGV, Segmentation fault.</span><br><span class="line">0x0040084c in copy_str (str&#x3D;0x0) at main.c:8</span><br><span class="line">8	    strcpy(str, &quot;Hello World&quot;);</span><br><span class="line">(gdb) bt</span><br><span class="line">#0  0x0040084c in copy_str (str&#x3D;0x0) at main.c:8</span><br><span class="line">#1  0x004009bc in main (argc&#x3D;1, argv&#x3D;0x7fff6ea4) at main.c:15</span><br></pre></td></tr></table></figure>

<p>从上面的调试结果可以定位到程序运行到 <code>copy_str</code> 函数的 strcpy 出现了段错误，符合预期结果。  </p>
<p>gdbservere 调试有时候会遇到诸如这样的警告。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">warning: .dynamic section for &quot;&#x2F;home&#x2F;kyson&#x2F;toolchain&#x2F;msdk-4.4.7-mips-EL-3.10-u0.9.33-m32t-140827&#x2F;bin&#x2F;..&#x2F;lib&#x2F;libdl.so.0&quot; is not at the expected address (wrong library or version mismatch?)</span><br><span class="line">warning: .dynamic section for &quot;&#x2F;home&#x2F;kyson&#x2F;workspace&#x2F;toolchain&#x2F;msdk-4.4.7-mips-EL-3.10-u0.9.33-m32t-140827&#x2F;bin&#x2F;..&#x2F;lib&#x2F;libm.so.0&quot; is not at the expected address (wrong library or version mismatch?)</span><br></pre></td></tr></table></figure>

<p>这是 Linux 主机端使用的动态库与设备端使用的动态库不一致导致的，通常不影响我们的调试，可以忽略。想要消除这个警告，可以把交叉编译工具链 <strong>lib</strong> 目录下的动态库打包上传到目标设备上的 <strong>/tmp</strong> 目录下，然后在设备上执行 <code>export LD_LIBRARY_PATH=[动态库路径]</code>，让设备端使用的动态库跟 Linux 主机端的一致。  </p>
<h2 id="VSCode-可视化调试"><a href="#VSCode-可视化调试" class="headerlink" title="VSCode 可视化调试"></a>VSCode 可视化调试</h2><p>gdbserver 调试跑通之后，就可以配置 VSCode 进行可视化调试了。效果图：    </p>
<p><img src="https://gitee.com/kysonlok/imgurl/raw/master/img/20200613140241.jpg" alt=""></p>
<p>为了方便，这里使用默认的编译配置模板(在 VSCode 菜单栏选择 <strong>Terminal &gt; Configure Default Build Task</strong>)以及调试配置模板(在 VSCode 菜单栏选择 <strong>Run &gt; Add Configuration…</strong>)，然后稍微修改调整。  </p>
<h3 id="编译配置"><a href="#编译配置" class="headerlink" title="编译配置"></a>编译配置</h3><p>编译配置 <code>tasks.json</code> 只需要修改 <strong>command</strong> 参数为交叉编译工具链的 gcc。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;version&quot;: &quot;2.0.0&quot;,</span><br><span class="line">    &quot;tasks&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;shell&quot;,</span><br><span class="line">            &quot;label&quot;: &quot;C&#x2F;C++: gcc build active file&quot;,</span><br><span class="line">            &quot;command&quot;: &quot;&#x2F;home&#x2F;kyson&#x2F;toolchain&#x2F;rsdk-4.6.4-4181-EB-3.10-u0.9.33-m32-150324&#x2F;bin&#x2F;mips-linux-gcc&quot;,</span><br><span class="line">            &quot;args&quot;: [</span><br><span class="line">                &quot;-g&quot;,</span><br><span class="line">                &quot;$&#123;file&#125;&quot;,</span><br><span class="line">                &quot;-o&quot;,</span><br><span class="line">                &quot;$&#123;fileDirname&#125;&#x2F;$&#123;fileBasenameNoExtension&#125;&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;options&quot;: &#123;</span><br><span class="line">                &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;problemMatcher&quot;: [</span><br><span class="line">                &quot;$gcc&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;group&quot;: &#123;</span><br><span class="line">                &quot;kind&quot;: &quot;build&quot;,</span><br><span class="line">                &quot;isDefault&quot;: true</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于复杂的工程，一般只需要修改编译配置 <code>tasks.json</code>，用 Makefile 规则来组织 gcc 编译，可以参考 <a href="https://kysonlok.github.io/2020/06/11/VSCode开发利器/#编译配置">VSCode 开发利器 - C/C++ 开发 - 编译配置</a>。  </p>
<h3 id="调试配置"><a href="#调试配置" class="headerlink" title="调试配置"></a>调试配置</h3><p>调试配置 <code>launch.json</code> 要修改 <strong>miDebuggerPath</strong> 参数为交叉编译工具链的 gdb，并添加 <strong>miDebuggerServerAddress</strong> 参数指定 gdbserver 的 IP 地址以及端口。    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; Use IntelliSense to learn about possible attributes.</span><br><span class="line">    &#x2F;&#x2F; Hover to view descriptions of existing attributes.</span><br><span class="line">    &#x2F;&#x2F; For more information, visit: https:&#x2F;&#x2F;go.microsoft.com&#x2F;fwlink&#x2F;?linkid&#x3D;830387</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;gcc - Build and debug active file&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;cppdbg&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;program&quot;: &quot;$&#123;fileDirname&#125;&#x2F;$&#123;fileBasenameNoExtension&#125;&quot;,</span><br><span class="line">            &quot;args&quot;: [],</span><br><span class="line">            &quot;stopAtEntry&quot;: false,</span><br><span class="line">            &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;,</span><br><span class="line">            &quot;environment&quot;: [],</span><br><span class="line">            &quot;externalConsole&quot;: false,</span><br><span class="line">            &quot;MIMode&quot;: &quot;gdb&quot;,</span><br><span class="line">            &quot;setupCommands&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,</span><br><span class="line">                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,</span><br><span class="line">                    &quot;ignoreFailures&quot;: true</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;preLaunchTask&quot;: &quot;C&#x2F;C++: gcc build active file&quot;,</span><br><span class="line">            &quot;miDebuggerServerAddress&quot;: &quot;192.168.0.210:12120&quot;,</span><br><span class="line">            &quot;miDebuggerPath&quot;: &quot;&#x2F;home&#x2F;kyson&#x2F;toolchain&#x2F;rsdk-4.6.4-4181-EB-3.10-u0.9.33-m32-150324&#x2F;bin&#x2F;mips-linux-gdb&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p>[1] <a href="https://sourceware.org/gdb/current/onlinedocs/gdb/Server.html">Using the gdbserver Program</a>  </p>
<p>[2] <a href="https://code.visualstudio.com/docs/cpp/launch-json-reference#_remote-debugging-or-debugging-with-a-local-debugger-server">Remote Debugging or Debugging with a Local Debugger Server</a>  </p>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/VSCode/">VSCode</a><a class="link-muted mr-2" rel="tag" href="/tags/gdb/">gdb</a><a class="link-muted mr-2" rel="tag" href="/tags/gdbserver/">gdbserver</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/06/22/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">两数之和</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/06/13/ssh-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5-NAT-%E7%9A%84-VirtualBox-%E8%99%9A%E6%8B%9F%E6%9C%BA/"><span class="level-item">ssh 远程连接 NAT 的 VirtualBox 虚拟机</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "gk9VYOgmu7rmis3WxH3F9IE6-gzGzoHsz",
            appKey: "p3IvW2X3G3oRntzeDgNcklUB",
            
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#技术背景"><span class="mr-2">1</span><span>技术背景</span></a></li><li><a class="is-flex" href="#gdbserver-编译"><span class="mr-2">2</span><span>gdbserver 编译</span></a></li><li><a class="is-flex" href="#gdbserver-使用"><span class="mr-2">3</span><span>gdbserver 使用</span></a><ul class="menu-list"><li><a class="is-flex" href="#嵌入式设备端"><span class="mr-2">3.1</span><span>嵌入式设备端</span></a></li><li><a class="is-flex" href="#Linux-主机端"><span class="mr-2">3.2</span><span>Linux 主机端</span></a><ul class="menu-list"><li><a class="is-flex" href="#启动调试"><span class="mr-2">3.2.1</span><span>启动调试</span></a></li><li><a class="is-flex" href="#连接-gdbserver"><span class="mr-2">3.2.2</span><span>连接 gdbserver</span></a></li><li><a class="is-flex" href="#设置动态库路径-可选"><span class="mr-2">3.2.3</span><span>设置动态库路径(可选)</span></a></li><li><a class="is-flex" href="#开始调试"><span class="mr-2">3.2.4</span><span>开始调试</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#VSCode-可视化调试"><span class="mr-2">4</span><span>VSCode 可视化调试</span></a><ul class="menu-list"><li><a class="is-flex" href="#编译配置"><span class="mr-2">4.1</span><span>编译配置</span></a></li><li><a class="is-flex" href="#调试配置"><span class="mr-2">4.2</span><span>调试配置</span></a></li></ul></li><li><a class="is-flex" href="#参考文档"><span class="mr-2">5</span><span>参考文档</span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Kyson&#039;s Blog</a><p class="size-small"><span>&copy; 2020 Kyson Lok</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://kysonlok.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><style>.searchbox .searchbox-body { background: white; }</style><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"><gcse:searchresults-only></gcse:searchresults-only></div></div><script>(function() {
            var cx = '015657951233762086388:7pwpztiskhw';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
        })();</script></div><script src="/js/google_cse.js"></script></body></html>